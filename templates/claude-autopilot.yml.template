# claude-autopilot configuration
# Copy this file to your project root as `.claude-autopilot.yml` and fill in the values.
# See docs/adding-a-project.md for the full setup guide.
#
# Project-specific details (tech stack, test commands, conventions, protected files)
# belong in your project's CLAUDE.md, not here. This file is for orchestration config only.

# ─── Linear Integration ────────────────────────────────────────────────────────
# Connect to your Linear workspace so the executor and planning system can manage issues.

linear:
  team: ""                      # Team key, e.g., "ENG" — find it in Linear team settings URL
  project: ""                   # Project name — must match a Linear project exactly
  initiative: ""                # Initiative name — ties projects together under a strategic theme (optional)
  states:
    triage: "Triage"            # Planning system files new issues here for human review
    ready: "Todo"               # Executor picks up issues from this state
    in_progress: "In Progress"  # Executor moves issues here while working
    done: "Done"                # Executor moves issues here on success
    blocked: "Backlog"          # Executor moves issues here if it gets stuck

# ─── Executor ──────────────────────────────────────────────────────────────────
# The executor agent picks up Ready issues, implements them, and opens PRs.

executor:
  parallel: 3                   # Max concurrent agents (start low, increase with trust)
  timeout_minutes: 30           # Kill agent after this long
  poll_interval_minutes: 5      # How often to poll Linear/GitHub (0.5-60, default: 5)
  model: "sonnet"               # Model for executor agents

# ─── Planning ─────────────────────────────────────────────────────────────────
# The planning system scans the codebase and files improvement issues to Triage.

planning:
  schedule: "when_idle"         # "when_idle" | "daily" | "manual"
  min_ready_threshold: 5        # Only plan when fewer than N issues are in Ready+Triage
  max_issues_per_run: 5         # Cap on issues filed per planning run
  model: "opus"                 # Model for the CTO planning agent

# ─── Projects Loop ───────────────────────────────────────────────────────────
# The projects loop manages project-level ownership: triaging issues, spawning
# technical planners, and completing projects when all work is done.
# Requires an initiative to be configured.

# projects:
#   enabled: true                 # Enable the projects loop (default: true)
#   poll_interval_minutes: 10     # How often to check projects for triage issues
#   max_active_projects: 5        # Cap on concurrent project owner agents
#   timeout_minutes: 60           # Kill project owner agent after this long
#   model: "opus"                 # Model for project owner agents

# ─── GitHub ───────────────────────────────────────────────────────────────────
# GitHub integration for PR monitoring, CI checks, and the fixer agent.

github:
  repo: ""                        # "owner/repo" override — leave empty to auto-detect from git remote
  automerge: false                # Enable auto-merge on PRs created by the executor.
                                  # GitHub will merge the PR automatically once all required
                                  # status checks pass. The merge method (squash, merge, rebase)
                                  # is auto-detected from your repo settings. Requires:
                                  #   1. "Allow auto-merge" enabled in repo Settings > General
                                  #   2. Branch protection rules with required status checks
                                  # See: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/incorporating-changes-from-a-pull-request/automatically-merging-a-pull-request

# ─── Sandbox ──────────────────────────────────────────────────────────────────
# OS-level sandbox isolation for agent subprocesses (bubblewrap + socat on Linux).
# Restricts filesystem access to the worktree and optionally limits network.
# Requires: sudo apt-get install bubblewrap socat

# sandbox:
#   enabled: true                 # Enable OS-level sandbox (default: true)
#   auto_allow_bash: true         # Auto-approve bash commands inside the sandbox
#   network_restricted: false     # Restrict network to allowed domains only
#   extra_allowed_domains: []     # Additional domains when network_restricted is true

# ─── Project ──────────────────────────────────────────────────────────────────
# Minimal metadata used by the orchestrator. Everything else goes in CLAUDE.md.

project:
  name: ""                      # Human-readable project name, e.g., "Acme API"
